{"ast":null,"code":"import _assertThisInitialized from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/src/pages/SeatSelection.js\";\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom'; // there are two ways for the user to select seats:\n// 1: self-selection system\n//      the user goes into the system before most of other competetors,\n//      and then easily gets the desired seat.\n// 2: auto-selection system\n//      this system will based on the user's preference to help selecting the seat\n// how to enter those systems:\n// self-selection: once the user clicks the \"进入图书馆选座系统\" button, then the user can enter the seat selection page\n// auto-selection system: the user first clicks the \"进入智能抢座系统\" button, then the user can enter the setting pages,\n// then the system will select seats based on those preferences.\n\nexport var SeatSelection =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SeatSelection, _Component);\n\n  function SeatSelection(props) {\n    var _this;\n\n    _classCallCheck(this, SeatSelection);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SeatSelection).call(this, props)); // states:\n    // redirectToAutoSelection: direct to the auto seat selection if it is true\n\n    _this.state = {\n      redirectToAutoSelection: false,\n      selfSeatSelectionStatus: null\n    };\n    return _this;\n  }\n\n  _createClass(SeatSelection, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.props.userID || !this.props.agree) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.redirectToAutoSelection) {\n        return React.createElement(Redirect, {\n          to: \"/auto-selection\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        });\n      }\n\n      var selfSeatSelection = \"尚未进入座位预约网站\";\n      var selfSelectionColor = \"bg-secondary text-white\";\n\n      if (this.state.selfSeatSelectionStatus === true) {\n        selfSeatSelection = \"成功进入选座网站\";\n        selfSelectionColor = \"bg-success text-white\";\n      } else if (this.state.selfSeatSelectionStatus === false) {\n        selfSeatSelection = \"读取失败\";\n        selfSelectionColor = \"bg-success text-danger\";\n      }\n\n      return React.createElement(\"div\", {\n        className: \"seat-selection-page-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-bloom seat-selection-page-title-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"\\u667A\\u80FD\\u62A2\\u5EA7\\u7CFB\\u7EDF\\u3002\"), React.createElement(\"button\", {\n        className: \"button-item btn btn-danger\",\n        onClick: function onClick() {\n          _this2.props.setValueHandler(\"userID\", null);\n\n          _this2.props.setValueHandler(\"condition\", false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"\\u9000\\u51FA\")), React.createElement(\"div\", {\n        className: \"selection-page-options-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-bloom option-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"\\u672C\\u9009\\u9879\\u53EF\\u8BA9\\u60A8\\u8FDB\\u5165\\u81EA\\u4FEE\\u5BA4\\u5EA7\\u4F4D\\u9605\\u89C8\\u7F51\\u5740\\uFF0C\\u5141\\u8BB8\\u60A8\\u5148\\u4EBA\\u4E00\\u6B65\\u83B7\\u53D6\\u60F3\\u8981\\u7684\\u5EA7\\u4F4D\\u3002\"), React.createElement(\"ul\", {\n        className: \"warning-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"\\u8BF7\\u6CE8\\u610F\", React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"\\u5C3D\\u7BA1\\u60A8\\u53EF\\u4EE5\\u63D0\\u524D\\u8FDB\\u5165\\u5EA7\\u4F4D\\u9605\\u89C8\\u7F51\\u5740\\uFF0C\\u7B2C\\u4E8C\\u65E5\\u7684\\u5EA7\\u4F4D\\u9884\\u7EA6\\u7684\\u5F00\\u653E\\u65F6\\u95F4\\u5927\\u7EA6\\u5728\\u665A\\u4E0A8\\u70B930\\u520610\\u79D2\\u523020\\u79D2\\u5DE6\\u53F3\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"\\u82E5\\u60A8\\u957F\\u65F6\\u95F4\\u672A\\u5728\\u5FAE\\u4FE1\\u4E0A\\u767B\\u9646\\uFF08\\u4E00\\u5468\\uFF09\\uFF0C\\u60A8\\u9700\\u5728\\u624B\\u673A\\u4E0A\\u5148\\u767B\\u9646\\u65B9\\u53EF\\u6709\\u6548\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"\\u82E5\\u60A8\\u53EA\\u9009\\u5230\\u4E86\\u5F53\\u5929\\u7684\\u5EA7\\u4F4D\\uFF0C10\\u79D2\\u5DE6\\u53F3\\u5EA7\\u4F4D\\u4F1A\\u88AB\\u6E05\\u7A7A\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"\\u82E5\\u5EA7\\u4F4D\\u9605\\u89C8\\u7F51\\u5740\\u4E0A\\u663E\\u793A\\u201C\\u7CFB\\u7EDF\\u6682\\u65F6\\u65E0\\u6CD5\\u53D7\\u7406\\uFF0C\\u8BF7\\u91CD\\u65B0\\u5C1D\\u8BD5\\u201D\\u7684\\u8BDD\\uFF0C\\u8BF7\\u5237\\u65B0\\u7F51\\u9875\\u76F4\\u5230\\u51FA\\u73B0\\u5EA7\\u4F4D\\uFF0C\\u4F46\\u7EE7\\u7EED\\u5237\\u65B0\\u4F1A\\u4F7F\\u5F53\\u524D\\u7F51\\u5740\\u5931\\u6548\\u3002\")), React.createElement(\"div\", {\n        className: \"self-selection-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button-item btn btn-primary\",\n        onClick: function onClick() {\n          _this2.props.getRoomEnterSerial(function (serial) {\n            if (serial) {\n              var seatViewURL = _this2.props.anatomy.domain + \"/\" + _this2.props.anatomy.selectJSPPath + \"?\" + _this2.props.anatomy.serialQuery + serial + \"&\" + _this2.props.anatomy.openIDQuery + _this2.props.userID + \"&\" + _this2.props.anatomy.roomNameQuery + _this2.props.anatomy.roomNameUnknown + \"&\" + _this2.props.anatomy.yuelanshiIDQuery + _this2.props.anatomy.firstFloorRoomID;\n              window.open(seatViewURL, '_blank');\n\n              _this2.setState({\n                selfSeatSelectionStatus: true\n              });\n            } else {\n              _this2.setState({\n                selfSeatSelectionStatus: false\n              });\n            }\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"\\u5F00\\u59CB\\u81EA\\u52A9\\u9009\\u5EA7\"), React.createElement(\"div\", {\n        className: selfSelectionColor + \" seat-self-selection-status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"状态：\" + selfSeatSelection))), React.createElement(\"div\", {\n        className: \"full-bloom option-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"\\u672C\\u9009\\u9879\\u53EF\\u6839\\u636E\\u60A8\\u7684\\u5EA7\\u4F4D\\u503E\\u5411\\uFF0C\\u4F7F\\u672C\\u7CFB\\u7EDF\\u4E3A\\u60A8\\u9009\\u62E9\\u5EA7\\u4F4D\\u3002\"), React.createElement(\"ul\", {\n        className: \"warning-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"\\u8BF7\\u6CE8\\u610F\", React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"\\u82E5\\u60A8\\u957F\\u65F6\\u95F4\\u672A\\u5728\\u5FAE\\u4FE1\\u4E0A\\u767B\\u9646\\uFF08\\u4E00\\u5468\\uFF09\\uFF0C\\u60A8\\u9700\\u5728\\u624B\\u673A\\u4E0A\\u5148\\u767B\\u9646\\u65B9\\u53EF\\u6709\\u6548\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"\\u62A2\\u5EA7\\u7CFB\\u7EDF\\u6709\\u62A2\\u4E0D\\u5230\\u5EA7\\u4F4D\\u7684\\u98CE\\u9669\\uFF0C\\u4F7F\\u7528\\u65F6\\u987B\\u8C28\\u614E\\u3002\"))), React.createElement(\"button\", {\n        className: \"button-item btn btn-primary\",\n        onClick: function onClick() {\n          _this2.setState({\n            redirectToAutoSelection: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"\\u81EA\\u52A8\\u9009\\u5EA7\\u7CFB\\u7EDF\"))));\n    }\n  }]);\n\n  return SeatSelection;\n}(Component); // test: K7jqkljf7t_mngoLy9edHTQq4\n// test2: K7jlCSEOE8r1oXHL2gp1_HlRg\n\nexport var AutoSeatSelectionPage =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(AutoSeatSelectionPage, _Component2);\n\n  function AutoSeatSelectionPage(props) {\n    var _this3;\n\n    _classCallCheck(this, AutoSeatSelectionPage);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(AutoSeatSelectionPage).call(this, props));\n    _this3.state = {\n      back: false,\n      firstPreference: {\n        label: \"无\",\n        value: \"\"\n      },\n      secondPreference: {\n        label: \"无\",\n        value: \"\"\n      },\n      thirdPreference: {\n        label: \"停止抢座\",\n        value: \"\"\n      },\n      automationStart: false,\n      isSuccess: false,\n      failReason: null\n    };\n    _this3.seatOptions = [{\n      label: \"无\",\n      value: \"\"\n    }];\n\n    for (var i = 1; i <= 208; i++) {\n      var label = i + \" (\";\n\n      if (_this3.isSingle(i)) {\n        label += \"单座\" + \")\";\n      } else {\n        label += \"双座\" + \")\";\n      }\n\n      _this3.seatOptions.push({\n        label: label,\n        value: i\n      });\n    }\n\n    _this3.seatOptionsRange = [{\n      label: \"无\",\n      value: \"\"\n    }];\n\n    for (var _i = 1; _i <= 20; _i++) {\n      var start = (_i - 1) * 10 + 1;\n      var end = _i * 10;\n\n      _this3.seatOptionsRange.push({\n        label: start + \" ~ \" + end,\n        value: {\n          start: start,\n          end: end\n        }\n      });\n    }\n\n    _this3.monthConverter = {\n      Jan: \"01\",\n      Feb: \"02\",\n      Mar: \"03\",\n      Apr: \"04\",\n      May: \"05\",\n      Jun: \"06\",\n      Jul: \"07\",\n      Aug: \"08\",\n      Sep: \"09\",\n      Oct: \"10\",\n      Nov: \"11\",\n      Dec: \"12\"\n    };\n    _this3.seatPriority = null;\n    _this3.pause = false;\n    _this3.firstPause = false;\n    _this3.firstStart = false;\n\n    _this3.seatOptionsRange.push({\n      label: 201 + \" ~ \" + 208,\n      value: {\n        start: 201,\n        end: 208\n      }\n    });\n\n    _this3.searchSeatAndReserveLoop = _this3.searchSeatAndReserveLoop.bind(_assertThisInitialized(_this3));\n    _this3.checkVadility = _this3.checkVadility.bind(_assertThisInitialized(_this3));\n    _this3.leaveSeat = _this3.leaveSeat.bind(_assertThisInitialized(_this3));\n    _this3.firstLog = null;\n    return _this3;\n  } // test: K7jlCSEOE8r1oXHL2gp1_HlRg\n\n\n  _createClass(AutoSeatSelectionPage, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevState) {\n      if (this.state.automationStart && this.state.automationStart !== prevState.automationStart) {\n        this.creatLogPiece(this.getCurrntTime() + \" --- 开始预约\");\n        var currentTime = this.getCurrentHourAndMinute();\n\n        if (\n        /*currentTime.hour >= 20 && currentTime.minute >= 20*/\n        true) {\n          this.searchSeatAndReserveLoop();\n        } else {\n          this.creatLogPiece(this.getCurrntTime() + \" --- 当前时间不能进行预约座位\");\n          this.creatLogPiece(this.getCurrntTime() + \" --- 请于20点20分后打开该程序\");\n          this.creatLogPiece(\"请点击终止预约按钮\");\n        }\n      }\n    }\n  }, {\n    key: \"reservePiece\",\n    value: function reservePiece(targetSeat, priority) {\n      var _this4 = this;\n\n      this.creatLogPiece(this.getCurrntTime() + \" --- 找到目标\");\n      this.creatLogPiece(this.getCurrntTime() + \" --- 开始预约第\" + targetSeat + \"号座位 （第\" + priority + \"目标）\");\n      this.reserveSeat(targetSeat, function (response) {\n        _this4.getReserveResult(response, function (response) {\n          var judgement = _this4.judgeReserveResult(response);\n\n          if (!judgement.isReserveSuccess) {\n            _this4.creatLogPiece(_this4.getCurrntTime() + \" --- 因为\" + judgement.reason + \", 预约失败\");\n\n            if (judgement.reason !== \"仅预约当天座位\") {\n              if (_this4.state.automationStart) {\n                _this4.searchSeatAndReserveLoop();\n              }\n            } else {\n              _this4.creatLogPiece(_this4.getCurrntTime() + \" --- 开始离开座位\");\n\n              _this4.leaveSeat(function () {\n                return _this4.searchSeatAndReserveLoop();\n              });\n            }\n          } else {\n            _this4.creatLogPiece(_this4.getCurrntTime() + \" --- 成功预约第二天座位\");\n\n            if (priority === 1) {\n              _this4.creatLogPiece(_this4.getCurrntTime() + \" --- 第1目标完成，任务结束\");\n\n              _this4.creatLogPiece(\"请点击终止预约按钮\");\n            } else {\n              _this4.creatLogPiece(_this4.getCurrntTime() + \" --- 第\" + priority + \"目标完成，继续抢座\");\n\n              _this4.seatPriority = priority;\n\n              _this4.searchSeatAndReserveLoop();\n            }\n          }\n        });\n      });\n    } // test REAL! : K7jkgpyHxQQISesAWzGx53DfU\n\n  }, {\n    key: \"searchSeatAndReserveLoop\",\n    value: function searchSeatAndReserveLoop() {\n      var _this5 = this;\n\n      if (this.pause) {\n        console.log(\"paused\");\n        setTimeout(function () {\n          if (_this5.firstPause) {\n            _this5.creatLogPiece(_this5.getCurrntTime() + \" --- 开始停止自动预约系统\");\n\n            _this5.creatLogPiece(_this5.getCurrntTime() + \" ---------------------\");\n\n            _this5.creatLogPiece(_this5.getCurrntTime() + \" --- 暂停成功\");\n\n            _this5.firstPause = false;\n            setTimeout(function () {\n              _this5.searchSeatAndReserveLoop();\n            });\n          }\n\n          if (!_this5.firstStart) {\n            _this5.creatLogPiece(_this5.getCurrntTime() + \" --- 暂停中\");\n          }\n\n          _this5.searchSeatAndReserveLoop();\n        }, 3000);\n      } else {\n        if (this.firstStart) {\n          this.firstStart = false;\n          this.creatLogPiece(this.getCurrntTime() + \" ---------------------\");\n          this.creatLogPiece(this.getCurrntTime() + \" --- 重新开始自动预约系统\");\n        }\n\n        this.creatLogPiece(this.getCurrntTime() + \" --- 开始搜索座位\");\n        this.props.getRoomEnterSerial(function (serial) {\n          if (!serial) {\n            _this5.showMachenismError();\n          } else {\n            _this5.findAllPossibleSeats(serial, function (possibleSeats) {\n              var targetSeat = null;\n              var priority = null;\n\n              if (_this5.state.firstPreference.value !== \"\") {\n                if (possibleSeats.includes(_this5.state.firstPreference.value)) {\n                  targetSeat = _this5.state.firstPreference.value;\n                  priority = 1;\n                }\n              }\n\n              if (targetSeat === null && _this5.state.secondPreference.value !== \"\") {\n                for (var start = _this5.state.secondPreference.value.start; start <= _this5.state.secondPreference.value.end; start++) {\n                  if (possibleSeats.includes(start)) {\n                    targetSeat = start;\n                    priority = 2;\n                  }\n                }\n              }\n\n              if (targetSeat === null && _this5.state.thirdPreference.value !== \"\") {\n                if (_this5.state.thirdPreference.value === \"single\") {\n                  possibleSeats.forEach(function (seat) {\n                    if (_this5.isSingle(seat)) {\n                      console.log(\"call\");\n                      targetSeat = seat;\n                      priority = 3;\n                    }\n                  });\n                } else if (_this5.state.thirdPreference.value === \"double\") {\n                  possibleSeats.forEach(function (seat) {\n                    if (!_this5.isSingle(seat)) {\n                      targetSeat = seat;\n                      priority = 3;\n                    }\n                  });\n                } else {\n                  if (possibleSeats.length > 0) {\n                    targetSeat = possibleSeats[0];\n                    priority = 3;\n                  }\n                }\n              }\n\n              console.log(\"target : \" + targetSeat);\n              console.log(\"priority : \" + priority);\n\n              if (targetSeat && (_this5.seatPriority === null || priority < _this5.seatPriority)) {\n                if (_this5.seatPriority && priority < _this5.seatPriority) {\n                  _this5.seatPriority = null;\n\n                  _this5.leaveSeat(function () {\n                    _this5.reservePiece(targetSeat, priority);\n                  });\n                } else {\n                  _this5.reservePiece(targetSeat, priority);\n                }\n              } else {\n                _this5.creatLogPiece(_this5.getCurrntTime() + \" --- 尚未出现目标座位\");\n\n                if (_this5.state.thirdPreference.value === \"\") {\n                  _this5.creatLogPiece(_this5.getCurrntTime() + \" --- 因为失去目标，本系统停止预约座位\");\n\n                  _this5.creatLogPiece(\"请点击终止预约按钮\");\n                } else {\n                  if (_this5.checkBefore21PM() && _this5.state.automationStart) {\n                    _this5.creatLogPiece(_this5.getCurrntTime() + \" --- 重新开始搜索座位\");\n\n                    _this5.searchSeatAndReserveLoop();\n                  }\n                }\n              }\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"leaveSeat\",\n    value: function leaveSeat(callback) {\n      var _this6 = this;\n\n      var leaveURL = this.props.anatomy.domain + \"/\" + this.props.anatomy.leavePath + \"?\" + this.props.anatomy.openIDQuery + this.props.userID;\n      fetch(leaveURL).then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        if (response.includes(\"取消预定！\") || response.includes(\"阅览室：无信息！\")) {\n          _this6.creatLogPiece(_this6.getCurrntTime() + \" --- 离开座位成功\");\n\n          if (_this6.state.automationStart) {\n            callback();\n          }\n        } else {\n          _this6.creatLogPiece(_this6.getCurrntTime() + \" --- 离开座位失败\");\n\n          _this6.creatLogPiece(_this6.getCurrntTime() + \" --- 重新尝试离开座位\");\n\n          _this6.leaveSeat(callback);\n        }\n      });\n    }\n  }, {\n    key: \"findAllPossibleSeats\",\n    value: function findAllPossibleSeats(serial, callback) {\n      fetch(this.getSeatViewURL(serial)).then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        var splitByLine = response.split(\"\\n\");\n        var possibleSeats = [];\n        splitByLine.forEach(function (line) {\n          if (line.includes(\"onclick=\\\"dianji(\")) {\n            var lineSplit = line.split(\">\");\n\n            if (lineSplit[1]) {\n              var secondSplit = lineSplit[1].split(\"<\");\n\n              if (secondSplit[0]) {\n                possibleSeats.push(parseInt(secondSplit[0], 10));\n              }\n            }\n          }\n        });\n        console.log(possibleSeats);\n        callback(possibleSeats);\n      });\n    }\n  }, {\n    key: \"judgeReserveResult\",\n    value: function judgeReserveResult(result) {\n      if (result.includes(\"您的位置在\")) {\n        return {\n          isReserveSuccess: false,\n          reason: \"当天座位尚未解除\"\n        };\n      } else if (result.includes(\"终端机刷卡\")) {\n        var today = this.getCurrntTime().split(\" \")[0];\n        console.log(today);\n\n        if (result.includes(today)) {\n          return {\n            isReserveSuccess: false,\n            reason: \"仅预约当天座位\"\n          };\n        } else {\n          return {\n            isReserveSuccess: true,\n            reason: \"成功预约第二天座位\"\n          };\n        }\n      } else if (result.includes(\"排队\")) {\n        return {\n          isReserveSuccess: false,\n          reason: \"正在预约其他座位\"\n        };\n      } else if (result.includes(\"该座位已经被预约\")) {\n        return {\n          isReserveSuccess: false,\n          reason: \"该座位已经被他人预约\"\n        };\n      } else if (result.includes(\"已预约\"\n      /*not sure*/\n      )) {\n        return {\n          isReserveSuccess: false,\n          reason: \"您已经成功预约座位\"\n        };\n      } else {\n        this.showMachenismError();\n        return null;\n      }\n    }\n  }, {\n    key: \"creatLogPiece\",\n    value: function creatLogPiece(text) {\n      var logRef = document.getElementById(\"reservation-log\");\n\n      if (logRef) {\n        var logPiece = document.createElement('li');\n        var textNode = document.createTextNode(text);\n        logPiece.appendChild(textNode);\n\n        if (!this.firstLog) {\n          logRef.appendChild(logPiece);\n        } else {\n          logRef.insertBefore(logPiece, this.firstLog);\n        }\n\n        this.firstLog = logPiece;\n      }\n    }\n  }, {\n    key: \"getReserveSeatURL\",\n    value: function getReserveSeatURL(seatNum) {\n      return this.props.anatomy.domain + \"/\" + this.props.anatomy.reservePath + \"?\" + this.props.anatomy.roomIDQuery + this.props.anatomy.firstFloorRoomID + \"&\" + this.props.anatomy.openIDQuery + this.props.userID + \"&\" + this.props.anatomy.seatNumQuery + seatNum;\n    }\n  }, {\n    key: \"getSeatViewURL\",\n    value: function getSeatViewURL(serial) {\n      return this.props.anatomy.domain + \"/\" + this.props.anatomy.selectJSPPath + \"?\" + this.props.anatomy.serialQuery + serial + \"&\" + this.props.anatomy.openIDQuery + this.props.userID + \"&\" + this.props.anatomy.roomNameQuery + this.props.anatomy.roomNameUnknown + \"&\" + this.props.anatomy.yuelanshiIDQuery + this.props.anatomy.firstFloorRoomID;\n    }\n  }, {\n    key: \"isSingle\",\n    value: function isSingle(number) {\n      return number >= 89 && number <= 110 || number >= 191 && number <= 208;\n    } // this piece will reserve the seat of first preference and then pass the result URL into callback function\n\n  }, {\n    key: \"reserveSeat\",\n    value: function reserveSeat(seatNum, callback) {\n      var reserveURL = this.getReserveSeatURL(seatNum);\n      console.log(reserveURL);\n      fetch(reserveURL).then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        console.log(response);\n        callback(response);\n      });\n    } // this piece will process the result and then pass the result into next function\n\n  }, {\n    key: \"getReserveResult\",\n    value: function getReserveResult(redirectSite, callback) {\n      var _this7 = this;\n\n      var serialSplit = redirectSite.split(\"serialNo=\");\n\n      if (serialSplit[1]) {\n        this.checkVadility(serialSplit[1], function () {\n          var resultURL = _this7.props.anatomy.domain + \"/\" + _this7.props.anatomy.selectJSPPath + \"?\" + _this7.props.anatomy.serialQuery + serialSplit[1];\n          fetch(resultURL).then(function (response) {\n            return response.text();\n          }).then(function (response) {\n            // result page\n            var urlSplit = response.split(\"<a href=\\\"\\\" class=\\\"\\\" \");\n\n            if (urlSplit[1]) {\n              var nextSplit = urlSplit[1];\n              var secondSplit = nextSplit.split(\"</a>\");\n\n              if (secondSplit[0]) {\n                var finalSplit = secondSplit[0].split(\">\");\n\n                if (finalSplit[1]) {\n                  var result = finalSplit[1];\n                  console.log(result);\n                  callback(result);\n                } else {\n                  _this7.showMachenismError();\n                }\n              } else {\n                _this7.showMachenismError();\n              }\n            } else {\n              _this7.showMachenismError();\n            }\n          });\n        });\n      } else {\n        this.showMachenismError();\n      }\n    }\n  }, {\n    key: \"showMachenismError\",\n    value: function showMachenismError() {\n      this.creatLogPiece(\"因预约座位机制改变，本系统已经失效\");\n      this.creatLogPiece(\"请点击终止预约按钮\");\n    }\n  }, {\n    key: \"checkBefore21PM\",\n    value: function checkBefore21PM() {\n      var timeInfo = this.getCurrentHourAndMinute();\n\n      if (timeInfo.hour < 21) {\n        return true;\n      } else {\n        this.creatLogPiece(\"因已经过21点，继续预约已无意义，因此停止预约。\");\n        this.creatLogPiece(\"请点击取消按钮\");\n        return false;\n      }\n    } // this will return the current time as following format (all in numbers):\n    // \"full year/month/day hour/minute/second\" \n\n  }, {\n    key: \"getCurrntTime\",\n    value: function getCurrntTime() {\n      var now = new Date();\n      var nowToString = now.toString();\n      var dateInfo = nowToString.split(\" \");\n      var currentTime = dateInfo[3] + \"-\" + this.monthConverter[dateInfo[1]] + \"-\" + dateInfo[2] + \" \" + dateInfo[4];\n      return currentTime;\n    }\n  }, {\n    key: \"getCurrentHourAndMinute\",\n    value: function getCurrentHourAndMinute() {\n      var now = new Date();\n      var nowToString = now.toString();\n      var dateInfo = nowToString.split(\" \");\n      var timeInfo = dateInfo[4].split(\":\");\n      return {\n        hour: timeInfo[0],\n        minute: timeInfo[1]\n      };\n    }\n  }, {\n    key: \"checkVadility\",\n    value: function checkVadility(serial, callback) {\n      var _this8 = this;\n\n      var vadilityURL = this.props.anatomy.domain + \"/\" + this.props.anatomy.selectSerialPath + \"?\" + this.props.anatomy.serialQuery + serial;\n      fetch(vadilityURL).then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        console.log(response);\n\n        if (response === \"no\") {\n          _this8.checkVadility(serial, callback);\n        } else {\n          callback();\n        }\n      });\n    } // Setting part\n    // first: the most desired seat (only 1)\n    // preference: single or double\n    // if all impossible: random get seats or stop loop\n    // way of seat selection\n    // no count registration: register by preference, once find invalid, then quit\n    // count registration: register by preference, once reserved, then if the upper are failed\n    // then try those seats\n    // Status part\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      if (!this.props.userID || !this.props.agree) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.back) {\n        return React.createElement(Redirect, {\n          to: \"/seat-selection\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561\n          },\n          __self: this\n        });\n      }\n\n      var startButtonColor = \"button-item btn btn-primary\";\n      var startButtonText = \"请选择您想要的座位\";\n      var startButtonDisable = this.state.firstPreference.value === \"\" && this.state.secondPreference.value === \"\" && this.state.thirdPreference.value === \"\";\n      var settingNotification = \"设定\";\n\n      if (this.state.automationStart) {\n        settingNotification = \"\";\n      }\n\n      if (!startButtonDisable) {\n        startButtonColor = \"button-item btn btn-success\";\n        startButtonText = \"开始抢座\";\n      }\n\n      return React.createElement(\"div\", {\n        className: \"auto-selection-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-bloom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581\n        },\n        __self: this\n      }, \"自动选座设定\" + settingNotification), React.createElement(\"button\", {\n        className: \"button-item btn btn-danger\",\n        onClick: function onClick() {\n          _this9.setState({\n            back: true,\n            automationStart: false\n          });\n\n          _this9.pause = false;\n          _this9.firstPause = false;\n          _this9.firstStart = false;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      }, \"\\u8FD4\\u56DE\")), !this.state.automationStart && React.createElement(\"div\", {\n        className: \"full-bloom automation-middle-part\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 594\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"auto-option-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 595\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596\n        },\n        __self: this\n      }, \"\\u8BF7\\u9009\\u62E9\\u60A8\\u6700\\u60F3\\u8981\\u7684\\u4E00\\u4E2A\\u5EA7\\u4F4D\"), React.createElement(Select, {\n        name: \"firstPreference\",\n        options: this.seatOptions,\n        value: this.state.firstPreference,\n        onChange: function onChange(event) {\n          _this9.setState({\n            firstPreference: event\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"auto-option-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 609\n        },\n        __self: this\n      }, \"\\u5176\\u6B21\\uFF0C\\u8BF7\\u9009\\u62E9\\u60A8\\u53EF\\u4EE5\\u63A5\\u53D7\\u7684\\u5EA7\\u4F4D\\u8303\\u56F4\"), React.createElement(Select, {\n        name: \"secondPreference\",\n        options: this.seatOptionsRange,\n        value: this.state.secondPreference,\n        onChange: function onChange(event) {\n          _this9.setState({\n            secondPreference: event\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"auto-option-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622\n        },\n        __self: this\n      }, \"\\u82E5\\u4E0A\\u8FF0\\u5EA7\\u4F4D\\u5747\\u65E0\\u6CD5\\u83B7\\u5F97\\uFF0C\\u8BF7\\u9009\\u62E9\\u53EF\\u63A5\\u53D7\\u7684\\u5EA7\\u4F4D\\u7684\\u7C7B\\u578B\"), React.createElement(Select, {\n        name: \"thirdPreference\",\n        options: [{\n          label: \"停止抢座\",\n          value: \"\"\n        }, {\n          label: \"任意座位\",\n          value: \"any\"\n        }, {\n          label: \"任意单座\",\n          value: \"single\"\n        }, {\n          label: \"任意双座\",\n          value: \"double\"\n        }],\n        value: this.state.thirdPreference,\n        onChange: function onChange(event) {\n          _this9.setState({\n            thirdPreference: event\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623\n        },\n        __self: this\n      }))), this.state.automationStart && React.createElement(\"div\", {\n        className: \"full-bloom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, \"\\u5F53\\u524D\\u6307\\u793A\\uFF1A\", React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643\n        },\n        __self: this\n      }, \"首要目标-\" + this.state.firstPreference.label), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 644\n        },\n        __self: this\n      }, \"次要目标-\" + this.state.secondPreference.label), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645\n        },\n        __self: this\n      }, \"座位类型倾向：\" + this.state.thirdPreference.label)), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 648\n        },\n        __self: this\n      }, \"\\u9884\\u7EA6\\u72B6\\u6001\\u76EE\\u5F55\\uFF1A\"), React.createElement(\"ul\", {\n        id: \"reservation-log\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 649\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652\n        },\n        __self: this\n      }, !this.state.automationStart && React.createElement(\"button\", {\n        className: startButtonColor + \" auto-start-button\",\n        disabled: startButtonDisable,\n        onClick: function onClick() {\n          _this9.setState({\n            automationStart: true\n          });\n\n          _this9.pause = false;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654\n        },\n        __self: this\n      }, startButtonText), this.state.automationStart && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 662\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"loop-control-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"loop-control-status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 665\n        },\n        __self: this\n      }, \"\\u6682\\u505C\"), React.createElement(\"button\", {\n        id: \"loop-button\",\n        className: \"button-item btn btn-primary\",\n        onClick: function onClick() {\n          var loopControlRef = document.getElementById(\"loop-control-button\");\n          var loopStatusRef = document.getElementById(\"loop-control-status\");\n          var buttonRef = document.getElementById(\"loop-button\");\n\n          if (!_this9.pause) {\n            _this9.firstPause = true;\n            _this9.pause = true;\n            _this9.firstStart = false;\n            loopControlRef.removeChild(loopStatusRef);\n            var newStatus = document.createElement(\"div\");\n            newStatus.id = \"loop-control-status\";\n            var newText = document.createTextNode(\"开始\");\n            newStatus.appendChild(newText);\n            loopControlRef.insertBefore(newStatus, buttonRef);\n\n            _this9.creatLogPiece(_this9.getCurrntTime() + \" --- 开始暂停自动预约系统\");\n          } else {\n            _this9.firstStart = true;\n            _this9.firstPause = false;\n            _this9.pause = false;\n            loopControlRef.removeChild(loopStatusRef);\n\n            var _newStatus = document.createElement(\"div\");\n\n            _newStatus.id = \"loop-control-status\";\n\n            var _newText = document.createTextNode(\"暂停\");\n\n            _newStatus.appendChild(_newText);\n\n            loopControlRef.insertBefore(_newStatus, buttonRef);\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 666\n        },\n        __self: this\n      }, \"\\u70B9\\u6211\")), React.createElement(\"button\", {\n        className: \"button-item btn btn-danger auto-end-button\",\n        onClick: function onClick() {\n          _this9.setState({\n            automationStart: false\n          });\n\n          _this9.pause = false;\n          _this9.firstPause = false;\n          _this9.firstStart = false;\n          _this9.firstLog = false;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 696\n        },\n        __self: this\n      }, \"\\u7EC8\\u6B62\\u9884\\u7EA6\"))));\n    }\n  }]);\n\n  return AutoSeatSelectionPage;\n}(Component);","map":{"version":3,"sources":["/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/src/pages/SeatSelection.js"],"names":["React","Component","Select","HashRouter","Router","Route","Switch","Redirect","SeatSelection","props","state","redirectToAutoSelection","selfSeatSelectionStatus","userID","agree","selfSeatSelection","selfSelectionColor","setValueHandler","getRoomEnterSerial","serial","seatViewURL","anatomy","domain","selectJSPPath","serialQuery","openIDQuery","roomNameQuery","roomNameUnknown","yuelanshiIDQuery","firstFloorRoomID","window","open","setState","AutoSeatSelectionPage","back","firstPreference","label","value","secondPreference","thirdPreference","automationStart","isSuccess","failReason","seatOptions","i","isSingle","push","seatOptionsRange","start","end","monthConverter","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","seatPriority","pause","firstPause","firstStart","searchSeatAndReserveLoop","bind","checkVadility","leaveSeat","firstLog","prevState","creatLogPiece","getCurrntTime","currentTime","getCurrentHourAndMinute","targetSeat","priority","reserveSeat","response","getReserveResult","judgement","judgeReserveResult","isReserveSuccess","reason","console","log","setTimeout","showMachenismError","findAllPossibleSeats","possibleSeats","includes","forEach","seat","length","reservePiece","checkBefore21PM","callback","leaveURL","leavePath","fetch","then","text","getSeatViewURL","splitByLine","split","line","lineSplit","secondSplit","parseInt","result","today","logRef","document","getElementById","logPiece","createElement","textNode","createTextNode","appendChild","insertBefore","seatNum","reservePath","roomIDQuery","seatNumQuery","number","reserveURL","getReserveSeatURL","redirectSite","serialSplit","resultURL","urlSplit","nextSplit","finalSplit","timeInfo","hour","now","Date","nowToString","toString","dateInfo","minute","vadilityURL","selectSerialPath","startButtonColor","startButtonText","startButtonDisable","settingNotification","event","loopControlRef","loopStatusRef","buttonRef","removeChild","newStatus","id","newText"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Select from 'react-select';\nimport { HashRouter as Router, Route, Switch, Redirect} from 'react-router-dom';\n\n\n// there are two ways for the user to select seats:\n// 1: self-selection system\n//      the user goes into the system before most of other competetors,\n//      and then easily gets the desired seat.\n\n// 2: auto-selection system\n//      this system will based on the user's preference to help selecting the seat\n\n// how to enter those systems:\n// self-selection: once the user clicks the \"进入图书馆选座系统\" button, then the user can enter the seat selection page\n// auto-selection system: the user first clicks the \"进入智能抢座系统\" button, then the user can enter the setting pages,\n// then the system will select seats based on those preferences.\n\n\nexport class SeatSelection extends Component {\n    constructor(props) {\n        super(props);\n        \n        // states:\n        // redirectToAutoSelection: direct to the auto seat selection if it is true\n        this.state = {\n            redirectToAutoSelection: false,\n            selfSeatSelectionStatus: null\n        }\n    }\n    \n    render() {\n        if(!this.props.userID || !this.props.agree) {\n            return <Redirect to=\"/\"/>\n        }\n\n        if(this.state.redirectToAutoSelection) {\n            return <Redirect to=\"/auto-selection\"/>\n        }\n        \n        let selfSeatSelection = \"尚未进入座位预约网站\";\n        let selfSelectionColor = \"bg-secondary text-white\";\n\n        if(this.state.selfSeatSelectionStatus === true) {\n            selfSeatSelection = \"成功进入选座网站\";\n            selfSelectionColor = \"bg-success text-white\";\n        } else if(this.state.selfSeatSelectionStatus === false) {\n            selfSeatSelection = \"读取失败\";\n            selfSelectionColor = \"bg-success text-danger\";\n        }\n\n        return(\n            <div className=\"seat-selection-page-container\">\n                <div className=\"full-bloom seat-selection-page-title-panel\" >\n                    <h1>智能抢座系统。</h1>\n                    <button className=\"button-item btn btn-danger\" onClick={() => {\n                        this.props.setValueHandler(\"userID\", null);\n                        this.props.setValueHandler(\"condition\", false);\n                    }}>退出</button>\n                </div>\n\n                <div className=\"selection-page-options-panel\"> \n                    <div className=\"full-bloom option-item\">\n                        <strong>本选项可让您进入自修室座位阅览网址，允许您先人一步获取想要的座位。</strong>\n                        <ul className=\"warning-list\">请注意\n                            <li>尽管您可以提前进入座位阅览网址，第二日的座位预约的开放时间大约在晚上8点30分10秒到20秒左右。</li>\n                            <li>若您长时间未在微信上登陆（一周），您需在手机上先登陆方可有效。</li>\n                            <li>若您只选到了当天的座位，10秒左右座位会被清空。</li>\n                            <li>若座位阅览网址上显示“系统暂时无法受理，请重新尝试”的话，请刷新网页直到出现座位，但继续刷新会使当前网址失效。</li>\n                        </ul>\n\n                        <div className=\"self-selection-panel\" >\n                            <button className=\"button-item btn btn-primary\" onClick={() => {\n                                this.props.getRoomEnterSerial((serial) => {\n                                    if(serial) {\n                                        let seatViewURL = this.props.anatomy.domain + \"/\" + this.props.anatomy.selectJSPPath + \"?\" + this.props.anatomy.serialQuery\n                                                            + serial + \"&\" + this.props.anatomy.openIDQuery + this.props.userID + \"&\" + this.props.anatomy.roomNameQuery +\n                                                            this.props.anatomy.roomNameUnknown + \"&\" + this.props.anatomy.yuelanshiIDQuery + this.props.anatomy.firstFloorRoomID;\n                                        window.open(seatViewURL, '_blank');\n                                        this.setState({\n                                            selfSeatSelectionStatus: true\n                                        })\n                                    } else {\n                                        this.setState({\n                                            selfSeatSelectionStatus: false\n                                        })\n                                    }\n                                });    \n                            }}>开始自助选座</button>\n                            <div className={selfSelectionColor + \" seat-self-selection-status\"}>{\"状态：\" + selfSeatSelection}</div>\n                        </div>\n                    </div>\n\n                    <div className=\"full-bloom option-item\">\n                        <div> \n                            <strong>本选项可根据您的座位倾向，使本系统为您选择座位。</strong>\n                            <ul className=\"warning-list\">请注意 \n                                <li>若您长时间未在微信上登陆（一周），您需在手机上先登陆方可有效。</li>\n                                <li>抢座系统有抢不到座位的风险，使用时须谨慎。</li>\n                            </ul>\n                        </div> \n                        <button className=\"button-item btn btn-primary\" onClick={() => {\n                            this.setState({\n                                redirectToAutoSelection: true\n                            })\n                        }}>自动选座系统</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\n// test: K7jqkljf7t_mngoLy9edHTQq4\n\n// test2: K7jlCSEOE8r1oXHL2gp1_HlRg\nexport class AutoSeatSelectionPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            back: false,\n            firstPreference: {label: \"无\", value: \"\"},\n            secondPreference: {label: \"无\", value: \"\"},\n            thirdPreference: {label: \"停止抢座\", value: \"\"},\n            automationStart: false,\n\n            isSuccess: false,\n            failReason: null\n        }\n\n        this.seatOptions = [{label: \"无\", value: \"\"}];\n        for(let i = 1; i <= 208; i++) {\n            let label = i + \" (\"\n            if(this.isSingle(i)) {\n                label += \"单座\" + \")\"\n            } else {\n                label += \"双座\" + \")\"\n            }\n            this.seatOptions.push(\n                {label: label, value: i}\n            );\n        }\n\n        this.seatOptionsRange = [{label: \"无\", value: \"\"}];\n        for(let i = 1; i <= 20; i++) {\n            let start = (i - 1) * 10 + 1;\n            let end = i * 10;\n            this.seatOptionsRange.push({\n                label: start + \" ~ \" + end,\n                value: {start: start, end: end}\n            });\n        }\n\n        this.monthConverter = {\n            Jan: \"01\", Feb: \"02\", Mar: \"03\",\n            Apr: \"04\", May: \"05\", Jun: \"06\",\n            Jul: \"07\", Aug: \"08\", Sep: \"09\",\n            Oct: \"10\", Nov: \"11\", Dec: \"12\"\n        }\n\n        this.seatPriority = null;\n        this.pause = false;\n        this.firstPause = false;\n        this.firstStart = false;\n\n        this.seatOptionsRange.push({label: 201 + \" ~ \" + 208, value: {start: 201, end: 208}});\n        \n        this.searchSeatAndReserveLoop = this.searchSeatAndReserveLoop.bind(this);\n        this.checkVadility = this.checkVadility.bind(this);\n        this.leaveSeat = this.leaveSeat.bind(this);\n\n        this.firstLog = null;\n    }\n\n    // test: K7jlCSEOE8r1oXHL2gp1_HlRg\n    componentDidUpdate(prevState) {\n        if(this.state.automationStart && (this.state.automationStart !== prevState.automationStart)) {\n            this.creatLogPiece(this.getCurrntTime() + \" --- 开始预约\");\n            let currentTime = this.getCurrentHourAndMinute();\n            if(/*currentTime.hour >= 20 && currentTime.minute >= 20*/ true) {\n                this.searchSeatAndReserveLoop();\n            } else {\n                this.creatLogPiece(this.getCurrntTime() + \" --- 当前时间不能进行预约座位\");\n                this.creatLogPiece(this.getCurrntTime() + \" --- 请于20点20分后打开该程序\");\n                this.creatLogPiece(\"请点击终止预约按钮\");\n            }\n        }\n    }\n\n    reservePiece(targetSeat, priority) {\n        this.creatLogPiece(this.getCurrntTime() + \" --- 找到目标\");\n        this.creatLogPiece(this.getCurrntTime() + \" --- 开始预约第\" + targetSeat + \"号座位 （第\" + priority + \"目标）\");\n        this.reserveSeat(targetSeat, (response) => {\n            this.getReserveResult(response, (response) => {\n                let judgement = this.judgeReserveResult(response);\n                if(!judgement.isReserveSuccess) {\n                    this.creatLogPiece(this.getCurrntTime() + \" --- 因为\" + judgement.reason + \", 预约失败\");\n                    if(judgement.reason !== \"仅预约当天座位\") {\n                        if(this.state.automationStart) {\n                            this.searchSeatAndReserveLoop();\n                        }\n                    } else {\n                        this.creatLogPiece(this.getCurrntTime() + \" --- 开始离开座位\");\n                        this.leaveSeat(() => this.searchSeatAndReserveLoop());\n                    }\n                } else {\n                    this.creatLogPiece(this.getCurrntTime() + \" --- 成功预约第二天座位\");\n                    if(priority === 1) {\n                        this.creatLogPiece(this.getCurrntTime() + \" --- 第1目标完成，任务结束\");\n                        this.creatLogPiece(\"请点击终止预约按钮\");\n                    } else {\n                        this.creatLogPiece(this.getCurrntTime() + \" --- 第\" + priority + \"目标完成，继续抢座\");\n                        this.seatPriority = priority;\n                        this.searchSeatAndReserveLoop();\n                    }\n                }\n            });\n        })\n    }\n\n    // test REAL! : K7jkgpyHxQQISesAWzGx53DfU\n    searchSeatAndReserveLoop() {\n        if(this.pause) {\n            console.log(\"paused\");\n            setTimeout(() => {\n                if(this.firstPause) {\n                    this.creatLogPiece(this.getCurrntTime() + \" --- 开始停止自动预约系统\");\n                    this.creatLogPiece(this.getCurrntTime() + \" ---------------------\");\n                    this.creatLogPiece(this.getCurrntTime() + \" --- 暂停成功\");\n                    this.firstPause = false;\n                    setTimeout(() => {\n                        this.searchSeatAndReserveLoop();\n                    });\n                }\n                if(!this.firstStart) {\n                    this.creatLogPiece(this.getCurrntTime() + \" --- 暂停中\");\n                }\n                this.searchSeatAndReserveLoop();\n            }, 3000);\n        } else {\n            if(this.firstStart) {\n                this.firstStart = false;\n                this.creatLogPiece(this.getCurrntTime() + \" ---------------------\");\n                this.creatLogPiece(this.getCurrntTime() + \" --- 重新开始自动预约系统\");\n            }\n            this.creatLogPiece(this.getCurrntTime() + \" --- 开始搜索座位\");\n            this.props.getRoomEnterSerial((serial) => {\n                if(!serial) {\n                    this.showMachenismError();\n                } else {\n                    this.findAllPossibleSeats(serial, (possibleSeats) => {\n                        let targetSeat = null;\n                        let priority = null;\n                        if(this.state.firstPreference.value !== \"\") {\n                            if(possibleSeats.includes(this.state.firstPreference.value)) {\n                                targetSeat = this.state.firstPreference.value;\n                                priority = 1;\n                            }\n                        }\n                        if(targetSeat === null && this.state.secondPreference.value !== \"\") {\n                            for(let start = this.state.secondPreference.value.start; \n                                    start <= this.state.secondPreference.value.end; start++) {\n                                if(possibleSeats.includes(start)) {\n                                    targetSeat = start;\n                                    priority = 2;\n                                }\n                            }\n                        }\n                        if(targetSeat === null && this.state.thirdPreference.value !== \"\") {\n                            if(this.state.thirdPreference.value === \"single\") {\n                                possibleSeats.forEach((seat) => {\n                                    if(this.isSingle(seat)) {\n                                        console.log(\"call\");\n                                        targetSeat = seat;\n                                        priority = 3;\n                                    }\n                                });\n                            } else if (this.state.thirdPreference.value === \"double\") {\n                                possibleSeats.forEach((seat) => {\n                                    if(!this.isSingle(seat)) {\n                                        targetSeat = seat;\n                                        priority = 3;\n                                    }\n                                });\n                            } else {\n                                if(possibleSeats.length > 0) {\n                                    targetSeat = possibleSeats[0];\n                                    priority = 3;\n                                }\n                            }\n                        }\n                        console.log(\"target : \" + targetSeat);\n                        console.log(\"priority : \" + priority);\n                        if(targetSeat && (this.seatPriority === null || priority < this.seatPriority)) {\n                            if(this.seatPriority && priority < this.seatPriority) {\n                                this.seatPriority = null;\n                                this.leaveSeat(() => {\n                                    this.reservePiece(targetSeat, priority);\n                                });\n                            } else {\n                                this.reservePiece(targetSeat, priority);\n                            }\n                        } else {\n                            this.creatLogPiece(this.getCurrntTime() + \" --- 尚未出现目标座位\");\n                            if(this.state.thirdPreference.value === \"\") {\n                                this.creatLogPiece(this.getCurrntTime() + \" --- 因为失去目标，本系统停止预约座位\");\n                                this.creatLogPiece(\"请点击终止预约按钮\");\n                            } else {\n                                if(this.checkBefore21PM() && this.state.automationStart) {\n                                    this.creatLogPiece(this.getCurrntTime() + \" --- 重新开始搜索座位\");\n                                    this.searchSeatAndReserveLoop();\n                                }\n                            }\n                        }\n                    });\n                    \n                }\n            });\n        }\n    }\n\n    leaveSeat(callback) {\n        let leaveURL = this.props.anatomy.domain + \"/\" + this.props.anatomy.leavePath \n                        + \"?\" + this.props.anatomy.openIDQuery + this.props.userID;\n        fetch(leaveURL).then((response) => {\n            return response.text();\n        }).then((response) => {\n            if(response.includes(\"取消预定！\") || response.includes(\"阅览室：无信息！\")) {\n                this.creatLogPiece(this.getCurrntTime() + \" --- 离开座位成功\");\n                if(this.state.automationStart) {\n                    callback();\n                }\n            } else {\n                this.creatLogPiece(this.getCurrntTime() + \" --- 离开座位失败\");\n                this.creatLogPiece(this.getCurrntTime() + \" --- 重新尝试离开座位\");\n                this.leaveSeat(callback);\n            }\n        });\n    }\n\n\n    findAllPossibleSeats(serial, callback) {\n        fetch(this.getSeatViewURL(serial)).then((response) => {\n            return response.text();\n        }).then((response) => {\n            let splitByLine = response.split(\"\\n\");\n            let possibleSeats = [];\n            splitByLine.forEach((line) => {\n                if(line.includes(\"onclick=\\\"dianji(\")) {\n                    let lineSplit = line.split(\">\");\n                    if(lineSplit[1]) {\n                        let secondSplit = lineSplit[1].split(\"<\");\n                        if(secondSplit[0]) {                    \n                            possibleSeats.push(parseInt(secondSplit[0], 10));\n                        }\n                    }\n                }\n            });\n            console.log(possibleSeats);\n            callback(possibleSeats);\n        });\n    }\n\n    judgeReserveResult(result) {\n        if(result.includes(\"您的位置在\")) {\n            return ({\n                isReserveSuccess: false,\n                reason: \"当天座位尚未解除\"\n            })\n        } else if(result.includes(\"终端机刷卡\")) {\n            let today = this.getCurrntTime().split(\" \")[0];\n            console.log(today);\n            if(result.includes(today)) {\n                return({\n                    isReserveSuccess: false,\n                    reason: \"仅预约当天座位\"\n                });\n            } else {\n                return({\n                    isReserveSuccess: true,\n                    reason: \"成功预约第二天座位\"\n                })\n            }\n        } else if(result.includes(\"排队\")) {\n            return({\n                isReserveSuccess: false,\n                reason: \"正在预约其他座位\"\n            });\n        } else if(result.includes(\"该座位已经被预约\")) {\n            return({\n                isReserveSuccess: false,\n                reason: \"该座位已经被他人预约\"\n            });\n        } else if(result.includes(\"已预约\" /*not sure*/)) {\n            return({\n                isReserveSuccess: false,\n                reason: \"您已经成功预约座位\"\n            })\n        } else {\n            this.showMachenismError();\n            return(null);\n        }\n    }\n\n    creatLogPiece(text) {\n        let logRef = document.getElementById(\"reservation-log\");\n        if(logRef) {\n            let logPiece = document.createElement('li');\n            let textNode = document.createTextNode(text);\n            logPiece.appendChild(textNode);\n            if(!this.firstLog) {\n                logRef.appendChild(logPiece);\n            } else {\n                logRef.insertBefore(logPiece, this.firstLog);\n            }\n            this.firstLog = logPiece;\n        }\n    }\n\n    getReserveSeatURL(seatNum) {\n        return this.props.anatomy.domain + \"/\" + this.props.anatomy.reservePath + \"?\"\n                    + this.props.anatomy.roomIDQuery + this.props.anatomy.firstFloorRoomID + \"&\" \n                    + this.props.anatomy.openIDQuery + this.props.userID + \"&\" \n                    + this.props.anatomy.seatNumQuery + seatNum;\n    }\n\n    getSeatViewURL(serial) {\n        return this.props.anatomy.domain + \"/\" + this.props.anatomy.selectJSPPath + \"?\" + this.props.anatomy.serialQuery\n                    + serial + \"&\" + this.props.anatomy.openIDQuery + this.props.userID + \"&\" + this.props.anatomy.roomNameQuery +\n                    this.props.anatomy.roomNameUnknown + \"&\" + this.props.anatomy.yuelanshiIDQuery + this.props.anatomy.firstFloorRoomID;\n    }\n\n    isSingle(number) {\n        return (number >= 89 && number <= 110) || (number >= 191 && number <= 208);\n    }\n\n    // this piece will reserve the seat of first preference and then pass the result URL into callback function\n    reserveSeat(seatNum, callback) {\n        let reserveURL = this.getReserveSeatURL(seatNum);\n        console.log(reserveURL);\n        fetch(reserveURL).then((response) => {\n            return response.text();\n        }).then((response) => {\n            console.log(response);\n            callback(response);\n        });\n    }\n\n    // this piece will process the result and then pass the result into next function\n    getReserveResult(redirectSite, callback) {\n        let serialSplit = redirectSite.split(\"serialNo=\");\n        if(serialSplit[1]) {\n            this.checkVadility(serialSplit[1], () => {\n                let resultURL = this.props.anatomy.domain + \"/\" + this.props.anatomy.selectJSPPath + \"?\" \n                                    + this.props.anatomy.serialQuery + serialSplit[1];\n                fetch(resultURL).then((response) => {\n                    return response.text();\n                }).then((response) => {\n                    // result page\n                    let urlSplit = response.split(\"<a href=\\\"\\\" class=\\\"\\\" \");\n                    if(urlSplit[1]) {\n                        let nextSplit = urlSplit[1];\n                        let secondSplit = nextSplit.split(\"</a>\");\n                        if(secondSplit[0]) {\n                            let finalSplit = secondSplit[0].split(\">\");\n                            if(finalSplit[1]) {\n                                let result = finalSplit[1];\n                                console.log(result);\n                                callback(result);\n                            } else {\n                                this.showMachenismError();\n                            }\n                        } else {\n                            this.showMachenismError();\n                        }\n                    } else {\n                        this.showMachenismError();\n                    }\n                }); \n            });\n        } else {\n            this.showMachenismError();\n        }\n    }\n\n    showMachenismError() {\n        this.creatLogPiece(\"因预约座位机制改变，本系统已经失效\");\n        this.creatLogPiece(\"请点击终止预约按钮\");\n    }\n\n    checkBefore21PM() {\n        let timeInfo = this.getCurrentHourAndMinute()\n        if(timeInfo.hour < 21) {\n            return true;\n        } else {\n            this.creatLogPiece(\"因已经过21点，继续预约已无意义，因此停止预约。\");\n            this.creatLogPiece(\"请点击取消按钮\");\n            return false;\n        }\n    }\n\n\n    // this will return the current time as following format (all in numbers):\n    // \"full year/month/day hour/minute/second\" \n    getCurrntTime() {\n        let now = new Date();\n        let nowToString = now.toString();\n        let dateInfo = nowToString.split(\" \");\n\n        let currentTime = dateInfo[3] + \"-\" + this.monthConverter[dateInfo[1]] + \"-\" + dateInfo[2]\n                            + \" \" + dateInfo[4]\n\n        return currentTime;\n    }\n\n    getCurrentHourAndMinute() {\n        let now = new Date();\n        let nowToString = now.toString();\n        let dateInfo = nowToString.split(\" \");\n        let timeInfo = dateInfo[4].split(\":\");\n        return({hour: timeInfo[0], minute: timeInfo[1]});\n    }\n\n    checkVadility(serial, callback) {\n        let vadilityURL = this.props.anatomy.domain + \"/\" + this.props.anatomy.selectSerialPath + \"?\" \n                            + this.props.anatomy.serialQuery + serial;\n        fetch(vadilityURL).then((response) => {\n            return response.text()\n        }).then((response) => {\n            console.log(response);\n            if(response === \"no\") {\n                this.checkVadility(serial, callback);\n            } else {\n                callback();\n            }\n        })\n    }\n\n\n\n    // Setting part\n    // first: the most desired seat (only 1)\n    // preference: single or double\n    // if all impossible: random get seats or stop loop\n\n    // way of seat selection\n    // no count registration: register by preference, once find invalid, then quit\n    // count registration: register by preference, once reserved, then if the upper are failed\n    // then try those seats\n\n\n\n    // Status part\n    render() {\n        if(!this.props.userID || !this.props.agree) {\n            return <Redirect to=\"/\"/>\n        }\n\n        if(this.state.back) {\n            return <Redirect to=\"/seat-selection\" />\n        }\n\n        let startButtonColor = \"button-item btn btn-primary\";\n        let startButtonText = \"请选择您想要的座位\"\n        let startButtonDisable = this.state.firstPreference.value === \"\" && \n                                 this.state.secondPreference.value === \"\" && \n                                 this.state.thirdPreference.value === \"\";\n        let settingNotification = \"设定\";\n        if(this.state.automationStart) {\n            settingNotification = \"\";\n        }\n\n        if(!startButtonDisable) {\n            startButtonColor = \"button-item btn btn-success\";\n            startButtonText = \"开始抢座\";\n        }\n        return(\n            <div className=\"auto-selection-page\"> \n                <div className=\"full-bloom\" > \n                    <h1>{\"自动选座设定\" + settingNotification}</h1>\n\n                    <button className=\"button-item btn btn-danger\" onClick={() => {\n                        this.setState({\n                            back: true,\n                            automationStart: false\n                        })\n                        this.pause = false;\n                        this.firstPause = false;\n                        this.firstStart = false;\n                    }}>返回</button>\n                </div>\n                {!this.state.automationStart &&\n                    <div className=\"full-bloom automation-middle-part\" > \n                        <div className=\"auto-option-item\" > \n                            <h2>请选择您最想要的一个座位</h2>\n                            <Select name=\"firstPreference\"\n                                options={this.seatOptions}\n                                value={this.state.firstPreference}\n                                onChange={(event) => {\n                                    this.setState({\n                                        firstPreference: event\n                                    })\n                                }}\n                            />\n                        </div>\n\n                        <div className=\"auto-option-item\"> \n                            <h2>其次，请选择您可以接受的座位范围</h2>\n                                <Select name=\"secondPreference\"\n                                    options={this.seatOptionsRange}\n                                    value={this.state.secondPreference}\n                                    onChange={(event) => {\n                                        this.setState({\n                                            secondPreference: event\n                                        })\n                                    }}\n                            />\n                        </div>\n\n                        <div className=\"auto-option-item\"> \n                            <h2>若上述座位均无法获得，请选择可接受的座位的类型</h2>\n                                <Select name=\"thirdPreference\"\n                                    options={[\n                                        {label: \"停止抢座\", value: \"\"},\n                                        {label: \"任意座位\", value: \"any\"},\n                                        {label: \"任意单座\", value: \"single\"},\n                                        {label: \"任意双座\", value: \"double\"}\n                                    ]}\n                                    value={this.state.thirdPreference}\n                                    onChange={(event) => {\n                                        this.setState({\n                                            thirdPreference: event\n                                        })\n                                    }}\n                            />\n                        </div>\n                    </div>\n                }\n                {this.state.automationStart && \n                    <div className=\"full-bloom\"> \n                        <ul>当前指示：\n                            <li>{\"首要目标-\" + this.state.firstPreference.label}</li>\n                            <li>{\"次要目标-\" + this.state.secondPreference.label}</li>\n                            <li>{\"座位类型倾向：\" + this.state.thirdPreference.label}</li>\n                        </ul>\n\n                        <h2>预约状态目录：</h2>\n                        <ul id=\"reservation-log\"></ul>\n                    </div>\n                }\n                <div>\n                    {!this.state.automationStart && \n                        <button className={startButtonColor + \" auto-start-button\"} disabled={startButtonDisable} onClick={() => {\n                            this.setState({\n                                automationStart: true\n                            })\n                            this.pause = false;\n                        }}>{startButtonText}</button>\n                    }\n                    {this.state.automationStart && \n                        <div>\n                             \n                             <div id=\"loop-control-button\"> \n                                 <div id=\"loop-control-status\">暂停</div>\n                                 <button id=\"loop-button\"  className=\"button-item btn btn-primary\" onClick={() => {\n                                    let loopControlRef = document.getElementById(\"loop-control-button\");\n                                    let loopStatusRef = document.getElementById(\"loop-control-status\");\n                                    let buttonRef = document.getElementById(\"loop-button\");\n                                    if(!this.pause) {\n                                        this.firstPause = true;\n                                        this.pause = true;\n                                        this.firstStart = false;\n                                        loopControlRef.removeChild(loopStatusRef);\n                                        let newStatus = document.createElement(\"div\");\n                                        newStatus.id = \"loop-control-status\";\n                                        let newText = document.createTextNode(\"开始\");\n                                        newStatus.appendChild(newText);\n                                        loopControlRef.insertBefore(newStatus, buttonRef);\n                                        this.creatLogPiece(this.getCurrntTime() + \" --- 开始暂停自动预约系统\");\n                                    } else {\n                                        this.firstStart = true;\n                                        this.firstPause = false;\n                                        this.pause = false;\n                                        loopControlRef.removeChild(loopStatusRef);\n                                        let newStatus = document.createElement(\"div\");\n                                        newStatus.id = \"loop-control-status\";\n                                        let newText = document.createTextNode(\"暂停\");\n                                        newStatus.appendChild(newText);\n                                        loopControlRef.insertBefore(newStatus, buttonRef);\n                                    }\n                                 }} >点我</button>\n                             </div>\n                            \n\n                            <button className=\"button-item btn btn-danger auto-end-button\" onClick={() => {\n                                this.setState({\n                                    automationStart: false\n                                })\n                                this.pause = false;\n                                this.firstPause = false;\n                                this.firstStart = false;\n                                this.firstLog = false;\n                            }}>终止预约</button>\n                        </div>\n                    }\n                </div>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}