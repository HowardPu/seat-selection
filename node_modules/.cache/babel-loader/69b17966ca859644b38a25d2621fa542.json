{"ast":null,"code":"import _classCallCheck from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/src/pages/idCollection.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nexport var ReaderIDCollection =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReaderIDCollection, _Component);\n\n  function ReaderIDCollection(props) {\n    var _this;\n\n    _classCallCheck(this, ReaderIDCollection);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReaderIDCollection).call(this, props));\n    _this.testURL = \"http://wx.jlcclib.com/wechat/obtainYlist?openId=of_\";\n    _this.state = {\n      valid: null,\n      readerID: \"\",\n      redirect: false\n    };\n    return _this;\n  }\n\n  _createClass(ReaderIDCollection, [{\n    key: \"testVadility\",\n    value: function testVadility() {\n      var _this2 = this;\n\n      var fullURL = this.testURL + this.state.readerID;\n      fetch(fullURL).then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        // split string by special character (multiple spaces, comma, semicolumn, tab)\n        var splitString = response.split(/[\\s,;\\t\\n]+/);\n\n        _this2.setState({\n          valid: splitString.includes(\"openId\")\n        });\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var value = event.target.value;\n      var fieid = event.target.name;\n      var change = this.state;\n      change[fieid] = value;\n      this.setState(change);\n    } // we need clear button!\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (!this.props.agree) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: \"/seat-selection\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"collection-page-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-bloom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"collection-page-title-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\u68C0\\u6D4B\"), React.createElement(\"button\", {\n        className: \"button-item btn btn-danger\",\n        onClick: function onClick() {\n          _this3.props.setValueHandler(\"condition\", false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"\\u53D6\\u6D88\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, this.state.valid === false && React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"\\u6B64\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\u4E3A\\u65E0\\u6548\\u5E8F\\u5217\\u53F7\"), this.state.valid === true && React.createElement(\"div\", {\n        className: \"alert alert-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"\\u6B64\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\u4E3A\\u6709\\u6548\\u5E8F\\u5217\\u53F7\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control\",\n        name: \"readerID\",\n        value: this.state.readerID,\n        onChange: function onChange(event) {\n          _this3.handleChange(event);\n\n          _this3.setState({\n            valid: null\n          });\n        },\n        placeholder: \"\\u4F8B\\u5982\\uFF1AG7jlCSEOE6r1oXLK2gp1_HlRg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"collection-page-button-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button-item btn btn-primary\",\n        onClick: function onClick() {\n          _this3.testVadility(_this3.state.readerID);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"\\u68C0\\u6D4B\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\"), React.createElement(\"button\", {\n        className: \"button-item btn btn-success\",\n        disabled: !this.state.valid,\n        onClick: function onClick() {\n          _this3.props.setValueHandler(\"userID\", _this3.state.readerID);\n\n          _this3.setState({\n            redirect: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"\\u8FDB\\u5165\\u62A2\\u5EA7\\u7CFB\\u7EDF\"))), React.createElement(\"div\", {\n        className: \"full-bloom open-id-wiki\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"\\u4F55\\u4E3A\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\uFF1F\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"\\u6B64\\u5E8F\\u5217\\u53F7\\u662F\\u6839\\u636E\\u60A8\\u7684\\u8BFB\\u4E66\\u8BC1\\u53F7\\u6240\\u81EA\\u52A8\\u4EA7\\u751F\\u7684\\u4E00\\u7EC4\\u5B57\\u7B26\\u4E32\\uFF0C\\u60A8\\u53EF\\u7528\\u8BE5\\u5E8F\\u5217\\u53F7\\u6765\\u9884\\u7EA6/\\u79BB\\u5F00\\u5EA7\\u4F4D\\u3002\")), React.createElement(\"div\", {\n        className: \"full-bloom open-id-help\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"\\u5982\\u4F55\\u83B7\\u53D6\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\uFF1F\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"\\u9996\\u5148\\u5728\\u624B\\u673A\\u4E2D\\u8FDB\\u5165\\u60A8\\u7684\\u81EA\\u4FEE\\u5BA4\\u5FAE\\u4FE1\\u9884\\u7EA6\\u7A0B\\u5E8F\\u4E3B\\u83DC\\u5355\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"\\u7136\\u540E\\u7528\\u4EFB\\u610F\\u6D4F\\u89C8\\u5668\\u6253\\u5F00\\u8BE5\\u7F51\\u7AD9\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\u89C2\\u5BDF\\u8FD9\\u4E2A\\u7F51\\u5740\\uFF0C\\u60A8\\u4F1A\\u53D1\\u73B0\\u5728\\\"code=_of\\\"\\u540E\\u6709\\u4E00\\u7EC4\\u5B57\\u7B26\\u4E32\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"\\u5C06\\u8FD9\\u4E2A\\u5B57\\u7B26\\u4E32\\u590D\\u5236\\uFF0C\\u8FD9\\u5C31\\u662F\\u60A8\\u7684\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\u3002\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"(\\u5728\\u60A8\\u66F4\\u6362\\u8BFB\\u4E66\\u8BC1\\u6216\\u66F4\\u6539\\u5FAE\\u4FE1\\u7ED1\\u5B9A\\u5E10\\u53F7\\u65F6\\uFF0C\\u9700\\u91CD\\u65B0\\u68C0\\u67E5\\u60A8\\u7684\\u8BFB\\u8005\\u5E8F\\u5217\\u53F7\\u3002)\"))));\n    }\n  }]);\n\n  return ReaderIDCollection;\n}(Component);","map":{"version":3,"sources":["/Users/HowardPu/Documents/academic/info/info 343/new repo/seat-selection/src/pages/idCollection.js"],"names":["React","Component","Redirect","ReaderIDCollection","props","testURL","state","valid","readerID","redirect","fullURL","fetch","then","response","text","splitString","split","setState","includes","event","value","target","fieid","name","change","agree","setValueHandler","handleChange","testVadility"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport {Redirect} from 'react-router-dom';\n\nexport class ReaderIDCollection extends Component {\n    constructor(props) {\n        super(props);\n        \n        this.testURL = \"http://wx.jlcclib.com/wechat/obtainYlist?openId=of_\"\n\n        this.state = {\n            valid: null,\n            readerID: \"\",\n            redirect: false\n        }\n    }\n\n    testVadility() {\n        let fullURL = this.testURL + this.state.readerID;\n        fetch(fullURL).then((response) => {\n            return response.text();\n        }).then((response) => {\n            // split string by special character (multiple spaces, comma, semicolumn, tab)\n            let splitString = response.split(/[\\s,;\\t\\n]+/);\n            this.setState({\n                valid: splitString.includes(\"openId\")\n            });\n        });\n    }\n\n    handleChange(event) {\n        let value = event.target.value;\n        let fieid = event.target.name;\n        let change = this.state;\n        change[fieid] = value;\n        this.setState(change);\n    }\n\n    // we need clear button!\n    render() {\n        if(!this.props.agree) {\n            return <Redirect to=\"/\" />\n        }\n        if(this.state.redirect) {\n            return <Redirect to=\"/seat-selection\"/>\n        }\n        return(\n            <div className=\"collection-page-container\">\n                <div className=\"full-bloom\">\n                    <div className=\"collection-page-title-panel\" >\n                        <h1>读者序列号检测</h1>\n\n                        <button className=\"button-item btn btn-danger\" onClick={() => {\n                            this.props.setValueHandler(\"condition\", false);\n                        }} >取消</button>\n                    </div>\n                    <div> \n                        {this.state.valid === false &&\n                            <div className=\"alert alert-danger\">此读者序列号为无效序列号</div>\n                        }\n                        {this.state.valid === true &&\n                            <div className=\"alert alert-success\">此读者序列号为有效序列号</div>\n                        }\n                        <div> \n                            <input className=\"form-control\"\n                                name=\"readerID\"\n                                value={this.state.readerID}\n                                onChange={(event) => {\n                                    this.handleChange(event);\n                                    this.setState({\n                                        valid: null\n                                    })\n                                }}\n                                placeholder=\"例如：G7jlCSEOE6r1oXLK2gp1_HlRg\"/>\n                        </div>\n                    </div>\n                    \n                    <div className=\"collection-page-button-panel\">\n                        <button className=\"button-item btn btn-primary\" onClick={() => {\n                            this.testVadility(this.state.readerID);\n                        }}>检测读者序列号</button>\n\n                        <button className=\"button-item btn btn-success\" disabled={!this.state.valid}\n                            onClick={() => {\n                                this.props.setValueHandler(\"userID\", this.state.readerID);\n                                this.setState({\n                                    redirect: true\n                                })\n                            }}\n                        >进入抢座系统</button>\n                    </div>\n                </div>\n\n                <div className=\"full-bloom open-id-wiki\">\n                    <h2>何为读者序列号？</h2>\n                    <p>此序列号是根据您的读书证号所自动产生的一组字符串，您可用该序列号来预约/离开座位。</p>\n                </div>\n\n                <div className=\"full-bloom open-id-help\">\n                    <h2>如何获取读者序列号？</h2>\n                    <ul>\n                        <li>首先在手机中进入您的自修室微信预约程序主菜单。</li>\n                        <li>然后用任意浏览器打开该网站。</li>\n                        <li>观察这个网址，您会发现在\"code=_of\"后有一组字符串。</li>\n                        <li>将这个字符串复制，这就是您的读者序列号。</li>\n                        <li>(在您更换读书证或更改微信绑定帐号时，需重新检查您的读者序列号。)</li>\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}